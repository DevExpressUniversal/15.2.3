<UserControl x:Class="DevExpress.XtraRichEdit.Forms.EditStyleFormControl"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
      xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
      xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
      xmlns:dxre="clr-namespace:DevExpress.Xpf.RichEdit"
      xmlns:dxoui="http://schemas.devexpress.com/winfx/2008/xaml/office"
      xmlns:dxreui="clr-namespace:DevExpress.Xpf.RichEdit.UI"
      xmlns:local="clr-namespace:DevExpress.XtraRichEdit.Forms"
      dx:StyleManager.ApplyApplicationTheme="True">
    <UserControl.Resources>
        <ResourceDictionary>
            <dxre:RichEditUICommand x:Key="commands" />
            <dxre:RichEditStringIdConverter x:Key="RichEditStringIdConverter" />
            <!--<local:SafeFontFamilyConverter x:Key="fontFamilyConverter" />-->
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid x:Name="LayoutRoot" MinWidth="530" MinHeight="400">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
        </Grid.RowDefinitions>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
                <ColumnDefinition Width="*"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition></RowDefinition>
                <RowDefinition></RowDefinition>
                <RowDefinition></RowDefinition>
                <RowDefinition></RowDefinition>
            </Grid.RowDefinitions>
            <TextBlock Text="{Binding Source={StaticResource RichEditStringIdConverter}, ConverterParameter=Caption_EditStyleFormCurrentStyleNameComboBox, Converter={StaticResource RichEditStringIdConverter}}" Margin="0,6,3,0"/>
            <TextBlock Text="{Binding Source={StaticResource RichEditStringIdConverter}, ConverterParameter=Caption_EditStyleFormStyleNameTextEdit, Converter={StaticResource RichEditStringIdConverter}}" Grid.Row="1" Margin="0,6,3,0" />
            <TextBlock Text="{Binding Source={StaticResource RichEditStringIdConverter}, ConverterParameter=Caption_EditStyleFormParentStyleNameComboBox, Converter={StaticResource RichEditStringIdConverter}}" Grid.Row="2" Margin="0,6,3,0" />
            <TextBlock Text="{Binding Source={StaticResource RichEditStringIdConverter}, ConverterParameter=Caption_EditStyleFormNextStyleNameComboBox, Converter={StaticResource RichEditStringIdConverter}}" Grid.Row="3" Margin="0,6,3,0"/>
            <dxe:ComboBoxEdit x:Name="cbCurrentStyle" Grid.Column="1" Margin="0,3,0,3" IsTextEditable="False"/>
            <dxe:TextEdit x:Name="edtName" Grid.Column="1" Grid.Row="1" Margin="0,3,0,3"/>
            <dxe:ComboBoxEdit x:Name="cbParent" Grid.Column="1" Grid.Row="2" Margin="0,3,0,3" IsTextEditable="False"/>
            <dxe:ComboBoxEdit x:Name="cbNextStyle" Grid.Column="1" Grid.Row="3" Margin="0,3,0,3" IsTextEditable="False"/>
        </Grid>
        <Grid Grid.Row="1">
            <dxb:BarManager x:Name="fontBarManager" ToolbarGlyphSize="Small" UseLayoutRounding="True">
                <dxb:BarManager.Bars>
                    <dxb:Bar Name="barCommon" UseWholeRow="True" AllowQuickCustomization="False" ShowDragWidget="False">
                        <dxb:Bar.DockInfo>
                            <dxb:BarDockInfo ContainerType="Top" />
                        </dxb:Bar.DockInfo>
                        <dxb:Bar.ItemLinks>
                            <dxb:BarEditItemLink BarItemName="fontEditItem"/>
                            <dxoui:BarSplitButtonColorEditItemLink BarItemName="colorEditItem"/>
                            <dxb:BarEditItemLink BarItemName="fontSizeEditItem" />
                            <dxb:BarCheckItemLink BarItemName="toggleFontBoldItem" />
                            <dxb:BarCheckItemLink BarItemName="toggleFontItalicItem" />
                            <dxb:BarCheckItemLink BarItemName="toggleFontUnderlineItem" />
                        </dxb:Bar.ItemLinks>
                    </dxb:Bar>
                </dxb:BarManager.Bars>
                <dxb:BarManager.Items>
                    <dxb:BarEditItem Name="fontEditItem" CategoryName="Format" EditWidth="150" ClosePopupOnChangingEditValue="True" EditValueChanged="fontEditItem_EditValueChanged">
                        <dxb:BarEditItem.EditSettings>
                            <dxe:ComboBoxEditSettings x:Name="fontFamilySettings" PopupHeight="300" PopupMinWidth="200">
                                <dxe:ComboBoxEditSettings.ItemTemplate>
                                    <DataTemplate>
                                        <ContentControl Content="{Binding}" />
                                        <!--FontFamily="{Binding Converter={StaticResource fontFamilyConverter}}"/>-->
                                    </DataTemplate>
                                </dxe:ComboBoxEditSettings.ItemTemplate>
                            </dxe:ComboBoxEditSettings>
                        </dxb:BarEditItem.EditSettings>
                    </dxb:BarEditItem>
                    <dxoui:BarSplitButtonColorEditItem x:Name="colorEditItem" EditValueChanged="colorEditItem_EditValueChanged" Command="{Binding Path=FormatFontForeColor, Mode=OneTime, Source={StaticResource commands}}">
                        <dxoui:BarSplitButtonColorEditItem.PopupControl>
                            <dxb:PopupControlContainerInfo>
                                <UserControl>
                                    <dxe:ColorEdit EditValue="{Binding ElementName=colorEditItem, Mode=TwoWay, Path=EditValue}" />
                                </UserControl>
                            </dxb:PopupControlContainerInfo>
                        </dxoui:BarSplitButtonColorEditItem.PopupControl>
                    </dxoui:BarSplitButtonColorEditItem>
                    <dxb:BarEditItem Name="fontSizeEditItem" CategoryName="Format" EditWidth="60" Description="Changes the font size of the selected text." EditValueChanged="fontSizeEditItem_EditValueChanged">
                        <dxb:BarEditItem.EditSettings>
                            <dxe:ComboBoxEditSettings x:Name="fontSizeSettings" PopupMaxHeight="250" />
                        </dxb:BarEditItem.EditSettings>
                    </dxb:BarEditItem>
                    <dxb:BarCheckItem Name="toggleFontBoldItem" Content="{Binding Source={StaticResource RichEditStringIdConverter}, ConverterParameter=Caption_EditStyleFormBoldBarCheckItemDescription, Converter={StaticResource RichEditStringIdConverter}}" CheckedChanged="toggleFontBoldItem_CheckedChanged" />
                    <dxb:BarCheckItem Name="toggleFontItalicItem" Content="{Binding Source={StaticResource RichEditStringIdConverter}, ConverterParameter=Caption_EditStyleFormItalicBarCheckItemDescription, Converter={StaticResource RichEditStringIdConverter}}" CheckedChanged="toggleFontItalicItem_CheckedChanged" />
                    <dxb:BarCheckItem Name="toggleFontUnderlineItem" Content="{Binding Source={StaticResource RichEditStringIdConverter}, ConverterParameter=Caption_EditStyleFormUnderlineBarCheckItemDescription, Converter={StaticResource RichEditStringIdConverter}}" CheckedChanged="toggleFontUnderlineItem_CheckedChanged" />
                </dxb:BarManager.Items>
                <dxb:BarManager.DXContextMenu>
                    <dxb:PopupMenu/>
                </dxb:BarManager.DXContextMenu>
            </dxb:BarManager>
        </Grid>
        <Grid Grid.Row="2">
            <dxb:BarManager x:Name="paragraphBarManager" ToolbarGlyphSize="Small" UseLayoutRounding="True">
                <dxb:BarManager.Bars>
                    <dxb:Bar Name="barCommon1" UseWholeRow="True" AllowQuickCustomization="False" ShowDragWidget="False">
                        <dxb:Bar.DockInfo>
                            <dxb:BarDockInfo ContainerType="Top" />
                        </dxb:Bar.DockInfo>
                        <dxb:Bar.ItemLinks>
                            <dxb:BarCheckItemLink BarItemName="toggleParagraphAlignmentLeftItem" />
                            <dxb:BarCheckItemLink BarItemName="toggleParagraphAlignmentCenterItem" />
                            <dxb:BarCheckItemLink BarItemName="toggleParagraphAlignmentRightItem" />
                            <dxb:BarCheckItemLink BarItemName="toggleParagraphAlignmentJustifyItem" />
                            <dxb:BarSubItemLink BarItemName="barLineSpacingSubItem" />
                            <dxb:BarButtonItemLink BarItemName="spacingIncreaseItem" />
                            <dxb:BarButtonItemLink BarItemName="spacingDecreaseItem" />
                            <dxb:BarButtonItemLink BarItemName="indentDecreaseItem" />
                            <dxb:BarButtonItemLink BarItemName="indentIncreaseItem" />
                        </dxb:Bar.ItemLinks>
                    </dxb:Bar>
                </dxb:BarManager.Bars>
                <dxb:BarManager.Items>
                    <dxb:BarCheckItem Name="toggleParagraphAlignmentLeftItem" Content="{Binding Source={StaticResource RichEditStringIdConverter}, ConverterParameter=Caption_EditStyleFormLeftBarCheckItemDescription, Converter={StaticResource RichEditStringIdConverter}}" CheckedChanged="toggleParagraphAlignmentLeftItem_CheckedChanged" />
                    <dxb:BarCheckItem Name="toggleParagraphAlignmentCenterItem" Content="{Binding Source={StaticResource RichEditStringIdConverter}, ConverterParameter=Caption_EditStyleFormCenterBarCheckItemDescription, Converter={StaticResource RichEditStringIdConverter}}" CheckedChanged="toggleParagraphAlignmentCenterItem_CheckedChanged" />
                    <dxb:BarCheckItem Name="toggleParagraphAlignmentRightItem" Content="{Binding Source={StaticResource RichEditStringIdConverter}, ConverterParameter=Caption_EditStyleFormRightBarCheckItemDescription, Converter={StaticResource RichEditStringIdConverter}}" CheckedChanged="toggleParagraphAlignmentRightItem_CheckedChanged" />
                    <dxb:BarCheckItem Name="toggleParagraphAlignmentJustifyItem" Content="{Binding Source={StaticResource RichEditStringIdConverter}, ConverterParameter=Caption_EditStyleFormJustifyBarCheckItemDescription, Converter={StaticResource RichEditStringIdConverter}}" CheckedChanged="toggleParagraphAlignmentJustifyItem_CheckedChanged" />
                    <dxb:BarSubItem Name="barLineSpacingSubItem" Content="{Binding Source={StaticResource RichEditStringIdConverter}, ConverterParameter=Caption_EditStyleFormLineSpacingBarSubItem, Converter={StaticResource RichEditStringIdConverter}}">
                        <dxb:BarSubItem.ItemLinksSource>
                            <dxb:BarItemCollection>
                                <dxb:BarCheckItem x:Name="changeParagraphLineSingleSpacingItem" Content="1.0" CheckedChanged="changeParagraphLineSingleSpacingItem_CheckedChanged"  />
                                <dxb:BarCheckItem x:Name="changeParagraphLineSingleHalfSpacingItem" Content="1.5" CheckedChanged="changeParagraphLineSingleHalfSpacingItem_CheckedChanged" />
                                <dxb:BarCheckItem x:Name="changeParagraphLineDoubleSpacingItem" Content="2.0" CheckedChanged="changeParagraphLineDoubleSpacingItem_CheckedChanged" />
                            </dxb:BarItemCollection>
                        </dxb:BarSubItem.ItemLinksSource>
                    </dxb:BarSubItem>
                    <dxb:BarButtonItem Name="spacingIncreaseItem" Content="{Binding Source={StaticResource RichEditStringIdConverter}, ConverterParameter=Caption_EditStyleFormIncreaseParagraphSpacingBarCheckItemDescription, Converter={StaticResource RichEditStringIdConverter}}" ItemClick="spacingIncreaseItem_ItemClick" />
                    <dxb:BarButtonItem Name="spacingDecreaseItem" Content="{Binding Source={StaticResource RichEditStringIdConverter}, ConverterParameter=Caption_EditStyleFormDecreaseParagraphSpacingBarCheckItemDescription, Converter={StaticResource RichEditStringIdConverter}}" ItemClick="spacingDecreaseItem_ItemClick" />
                    <dxb:BarButtonItem Name="indentDecreaseItem" Content="{Binding Source={StaticResource RichEditStringIdConverter}, ConverterParameter=Caption_EditStyleFormDecreaseIndentBarCheckItemDescription, Converter={StaticResource RichEditStringIdConverter}}" ItemClick="indentDecreaseItem_ItemClick" />
                    <dxb:BarButtonItem Name="indentIncreaseItem" Content="{Binding Source={StaticResource RichEditStringIdConverter}, ConverterParameter=Caption_EditStyleFormIncreaseIndentBarCheckItemDescription, Converter={StaticResource RichEditStringIdConverter}}" ItemClick="indentIncreaseItem_ItemClick" />
                </dxb:BarManager.Items>
                <dxb:BarManager.DXContextMenu>
                    <dxb:PopupMenu/>
                </dxb:BarManager.DXContextMenu>
            </dxb:BarManager>
        </Grid>
        <Grid Grid.Row="3">
            <dxre:RichEditControl x:Name="previewRichEditControl" VerticalScrollBarVisibility="Collapsed" HorizontalScrollBarVisibility="Collapsed" IsCaretVisible="False" IsEnabled="False" ActiveViewType="Simple">

            </dxre:RichEditControl>
        </Grid>
    </Grid>
</UserControl>