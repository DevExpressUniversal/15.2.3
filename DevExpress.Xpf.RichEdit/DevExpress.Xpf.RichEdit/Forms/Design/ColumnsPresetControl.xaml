<UserControl x:Class="DevExpress.Xpf.RichEdit.UI.ColumnsPresetControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
             xmlns:dxre="clr-namespace:DevExpress.Xpf.RichEdit"
             xmlns:dxreui="clr-namespace:DevExpress.Xpf.RichEdit.UI"
             dx:StyleManager.ApplyApplicationTheme="True">

    <UserControl.Resources>
        <ResourceDictionary>
            <dxre:RichEditStringIdConverter x:Key="RichEditStringIdConverter" />
            <dx:BooleanToVisibilityConverter x:Key="booleanToVisibilityConverter" Invert="False" />
            <dx:BooleanToVisibilityConverter x:Key="invertedBooleanToVisibilityConverter" Invert="True" />
        </ResourceDictionary>
    </UserControl.Resources>
    <StackPanel Orientation="Vertical">
        <dxe:CheckEdit x:Name="checkBox" HorizontalAlignment="Center" Tag="{Binding ImageSource}">
            <dxe:CheckEdit.EditTemplate>
                <ControlTemplate>
                    <Grid>
                        <dxe:CheckEditBox x:Name="PART_Editor">
                        </dxe:CheckEditBox>
                        <Border BorderThickness="1" BorderBrush="#80808080" Padding="6" Background="White" CornerRadius="3"  HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="{Binding Path=IsChecked, Converter={StaticResource invertedBooleanToVisibilityConverter}}">
                            <Image Source="{Binding Tag}" Width="32" Height="32" HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                        <Border BorderThickness="1" BorderBrush="#80808080" CornerRadius="3" HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="{Binding Path=IsChecked, Converter={StaticResource booleanToVisibilityConverter}}">
                            <Border BorderThickness="4" BorderBrush="White" Padding="2" CornerRadius="3">
                                <Border Background="White" CornerRadius="3">
                                    <Image Source="{Binding Tag}" Width="32" Height="32" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                </Border>
                            </Border>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </dxe:CheckEdit.EditTemplate>
        </dxe:CheckEdit>
        <TextBlock x:Name="label" Text="{Binding Text}" HorizontalAlignment="Center" />
    </StackPanel>
</UserControl>
