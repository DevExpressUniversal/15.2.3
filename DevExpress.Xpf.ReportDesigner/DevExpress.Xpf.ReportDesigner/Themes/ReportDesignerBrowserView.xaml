<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
            xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
            xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
            xmlns:dxi="http://schemas.devexpress.com/winfx/2008/xaml/core/internal"
            xmlns:dxp="http://schemas.devexpress.com/winfx/2008/xaml/printing"
            xmlns:dxdo="http://schemas.devexpress.com/winfx/2008/xaml/docking"
            xmlns:designernative="clr-namespace:DevExpress.Xpf.Reports.UserDesigner.Native"
            xmlns:designer="clr-namespace:DevExpress.Xpf.Reports.UserDesigner"
            xmlns:designerthemes="clr-namespace:DevExpress.Xpf.Reports.UserDesigner.Themes"
            xmlns:toolbox="clr-namespace:DevExpress.Xpf.Reports.UserDesigner.Toolbox"
            xmlns:reportexplorer="clr-namespace:DevExpress.Xpf.Reports.UserDesigner.ReportExplorer"
            xmlns:fieldlist="clr-namespace:DevExpress.Xpf.Reports.UserDesigner.FieldList"
            xmlns:propertygrid="clr-namespace:DevExpress.Xpf.Reports.UserDesigner.PropertyGrid"
            xmlns:groupsort="clr-namespace:DevExpress.Xpf.Reports.UserDesigner.GroupSort"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/DevExpress.Xpf.ReportDesigner.v15.2;component/Themes/ReportDesignerViewBase.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <designer:ReportDesignerDocumentViewKind x:Key="ReportDesignerDocumentViewKind_Designer">Designer</designer:ReportDesignerDocumentViewKind>

    <Style TargetType="designer:ReportDesignerBrowserView" BasedOn="{StaticResource {x:Type designer:ReportDesignerViewBase}}">
        <Setter Property="WindowServiceTemplate">
            <Setter.Value>
                <DataTemplate>
                    <ContentControl>
                        <dxmvvm:WindowService WindowShowMode="Dialog" WindowType="dx:DXTabbedWindow" Title="Report Designer" WindowStartupLocation="CenterOwner" WindowStyle="{designer:ReportDesignerTabbedWindowStyle}" ViewTemplate="{designer:ReportDesignerWindowViewTemplate}" />
                    </ContentControl>
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="TemplateRootStyle">
            <Setter.Value>
                <Style TargetType="dx:DXTabControl">
                    <Setter Property="dxmvvm:Interaction.BehaviorsTemplate">
                        <Setter.Value>
                            <DataTemplate>
                                <ContentControl>
                                    <designernative:ReportDesignerDocumentSelector SelectedDocumentViewSource="{Binding Path=AssociatedObject.SelectedItem, RelativeSource={RelativeSource Self}, Mode=OneWay, Converter={designernative:ReportDesignerDocumentViewSelectorConverter}}" />
                                </ContentControl>
                            </DataTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="designer:ReportDesignerBrowserView">
                    <dx:DXTabControl x:Name="Root" Style="{TemplateBinding TemplateRootStyle}" Padding="0"
                                     SelectedIndex="0">
                       <dx:DXTabControl.ControlBoxRightTemplate>
                            <DataTemplate>
                                <designer:RibbonPageSelector Ribbon="{Binding Path=(designer:ReportDesigner.Designer).Ribbon, RelativeSource={RelativeSource Self}}" />
                            </DataTemplate>
                        </dx:DXTabControl.ControlBoxRightTemplate>
                        <dx:DXTabControl.Resources>
                            <dx:TabbedWindowDocumentUIService
                                        x:Key="{x:Static designer:ReportDesignerDocumentsViewBase.DocumentManagerServiceKey}"
                                        Target="{x:Reference Root}"
                                        WindowClosingCommand="{Binding Path=Target.(designer:ReportDesigner.Designer).OnClosingCommand, RelativeSource={RelativeSource Self}}"
                                        ShowNewItemOnStartup="False"
                                        ViewTemplate="{Binding Path=Target.(designer:ReportDesigner.Designer).DocumentTemplate, RelativeSource={RelativeSource Self}}"
                            />
                        </dx:DXTabControl.Resources>
                        <dx:DXTabControl.View>
                            <dx:TabControlStretchView
                                        NewTabCommand="{Binding Path=Owner.(designer:ReportDesigner.Designer).Commands.NewDocument, RelativeSource={RelativeSource Self}}"
                                        NewWindowStyle="{Binding Owner.TemplatedParent.NewWindowStyle, RelativeSource={RelativeSource Self}}"
                                        NewTabControlStyle="{Binding Owner.TemplatedParent.TemplateRootStyle, RelativeSource={RelativeSource Self}}"
                                        RemoveTabItemsOnHiding="True"
                                        DragDropMode="Full"
                                        HideButtonShowMode="InAllTabs"
                                        Tag="{Binding Path=Owner.(designer:ReportDesigner.Designer).ReportStorage, Converter={designernative:ReportStorageToCanCreateNewConverter}, RelativeSource={RelativeSource Self}}"
                                        NewButtonShowMode="{Binding Tag, Converter={dxmvvm:BooleanToObjectConverter FalseValue=NoWhere, TrueValue=InTabPanel}, RelativeSource={RelativeSource Self}}"
                                        SingleTabItemHideMode="Hide"
                                        CloseWindowOnSingleTabItemHiding="True"
                            />
                        </dx:DXTabControl.View>
                        <dx:DXTabControl.ContentHeaderTemplate>
                            <DataTemplate>
                                <ContentControl HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" IsTabStop="False" Focusable="False" DockPanel.Dock="Top" Content="{x:Null}" ContentTemplate="{Binding Path=(designer:ReportDesigner.Designer).RibbonTemplate, RelativeSource={RelativeSource Self}}" Margin="0,-1,0,0" />
                            </DataTemplate>
                        </dx:DXTabControl.ContentHeaderTemplate>
                        <dx:DXTabControl.ContentFooterTemplate>
                            <DataTemplate>
                                <ContentControl HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" IsTabStop="False" Focusable="False" DockPanel.Dock="Bottom" Content="{x:Null}" ContentTemplate="{Binding Path=(designer:ReportDesigner.Designer).RibbonStatusBarTemplate, RelativeSource={RelativeSource Self}}" />
                            </DataTemplate>
                        </dx:DXTabControl.ContentFooterTemplate>
                        <dx:DXTabControl.ContentHostTemplate>
                            <DataTemplate>
                                <dxdo:DockLayoutManager Background="Transparent">
                                    <dxdo:LayoutGroup Orientation="Horizontal">
                                        <dxdo:LayoutPanel
                                                    AllowClose="False"
                                                    ShowCloseButton="False"
                                                    ShowCaption="False"
                                                    ItemWidth="Auto"
                                                    AllowSizing="False"
                                                    Visibility="{Binding Path=(designer:ReportDesigner.Document).ViewKind, RelativeSource={RelativeSource Self}, Converter={designernative:ViewKindToVisibilityConverter}, ConverterParameter={StaticResource ReportDesignerDocumentViewKind_Designer}}">
                                            <toolbox:ReportDesignerToolboxControl />
                                        </dxdo:LayoutPanel>
                                        <dxdo:LayoutGroup Orientation="Vertical">
                                            <dxdo:LayoutPanel AllowClose="False" ShowCloseButton="False" ShowCaption="False" ItemWidth="*" Background="Transparent">
                                                <dx:ContentHost />
                                            </dxdo:LayoutPanel>
                                            <dxdo:LayoutPanel Visibility="{Binding Path=(designer:ReportDesigner.Document).ViewKind, RelativeSource={RelativeSource Self}, Converter={designernative:ViewKindToVisibilityConverter}, ConverterParameter={StaticResource ReportDesignerDocumentViewKind_Designer}}"
                                                              ItemHeight="220"
                                                              Caption="Group And Sort"
                                                              AllowClose="False"
                                                              ShowCloseButton="False">
                                                <groupsort:GroupSortControl />
                                            </dxdo:LayoutPanel>
                                        </dxdo:LayoutGroup>
                                        <dxdo:LayoutGroup Orientation="Vertical" ItemWidth="390" Visibility="{Binding Path=(designer:ReportDesigner.Document).ViewKind, RelativeSource={RelativeSource Self}, Converter={designernative:ViewKindToVisibilityConverter}, ConverterParameter={StaticResource ReportDesignerDocumentViewKind_Designer}}">
                                            <dxdo:TabbedGroup>
                                                <dxdo:LayoutPanel Caption="Report Explorer" AllowClose="False" ShowCloseButton="False">
                                                    <reportexplorer:ReportExplorerControl />
                                                </dxdo:LayoutPanel>
                                                <dxdo:LayoutPanel Caption="Field List" AllowClose="False" ShowCloseButton="False">
                                                    <fieldlist:ReportDesignerFieldListControl />
                                                </dxdo:LayoutPanel>
                                            </dxdo:TabbedGroup>
                                            <dxdo:LayoutPanel Caption="Properties" AllowClose="False" ShowCloseButton="False" IsActive="{Binding Path=(designer:ReportDesigner.Designer).PropertyGridIsActive, RelativeSource={RelativeSource Self}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                <propertygrid:ReportDesignerPropertyGridControl />
                                            </dxdo:LayoutPanel>
                                        </dxdo:LayoutGroup>
                                    </dxdo:LayoutGroup>
                                </dxdo:DockLayoutManager>
                            </DataTemplate>
                        </dx:DXTabControl.ContentHostTemplate>
                    </dx:DXTabControl>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
