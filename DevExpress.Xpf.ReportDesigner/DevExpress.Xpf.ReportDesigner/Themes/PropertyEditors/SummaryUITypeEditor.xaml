<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
                    xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
                    xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
                    xmlns:reportsui="clr-namespace:DevExpress.XtraReports.UI;assembly=DevExpress.XtraReports.v15.2"
                    xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                    xmlns:designerthemes="clr-namespace:DevExpress.Xpf.Reports.UserDesigner.Themes"
                    xmlns:dataaccesseditors="clr-namespace:DevExpress.Xpf.DataAccess.Editors;assembly=DevExpress.Xpf.DataAccess.v15.2"
                    xmlns:dxp="http://schemas.devexpress.com/winfx/2008/xaml/printing"
                    xmlns:designereditors="clr-namespace:DevExpress.Xpf.Reports.UserDesigner.Editors">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/DevExpress.Xpf.ReportDesigner.v15.2;component/Themes/PropertyEditors/GroupBox.xaml" />
        <ResourceDictionary Source="/DevExpress.Xpf.ReportDesigner.v15.2;component/Themes/XRDiagram/BaseStyles.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <Style TargetType="designereditors:SummaryUITypeEditor">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate>
                    <dxlc:LayoutControl >
                        <dxlc:LayoutControl.Resources>
                            <designereditors:SummaryPreviewDataToFormatDisplayTextConverter x:Key="summaryPreviewToTextConverter" />
                        </dxlc:LayoutControl.Resources>
                        <dxlc:LayoutGroup ItemLabelsAlignment="Local" Orientation="Vertical" HorizontalAlignment="Stretch" Width="230" >
                            <dxlc:LayoutItem Label="Bound Field:" LabelPosition="Top">
                                    <designereditors:PopupTreeListEdit EditValue="{Binding BoundField, RelativeSource={RelativeSource TemplatedParent}}" ItemsSource="{Binding FieldListNodes, RelativeSource={RelativeSource TemplatedParent}}"
                                                        ValueMember="BindingData"
                                                        DisplayMember="FullPath"
                                                        ChildNodesPath="Children"
                                                        PopupDisplayMember="DisplayName"
                                                        HierarchicalPathProvider="{StaticResource ResourceKey=bindingDataHierarchicalPathProvider}"
                                                        PopupSelectionValidator="{StaticResource ResourceKey=bindingDataPopupSelectionValidator}"
                                                        TreeListCellTemplate="{DynamicResource {designerthemes:ReportDesignerThemeKey ResourceKey=FieldListNodeTemplate}}"/>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Summary function:" LabelPosition="Top">
                                    <dxe:ComboBoxEdit IsTextEditable="False" 
                                                  ItemsSource="{dxe:EnumItemsSource EnumType={x:Type reportsui:SummaryFunc}}"
                                                  EditValue="{Binding SummaryFunction, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" />
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Format string:" LabelPosition="Top">
                                    <dxe:ButtonEdit AllowDefaultButton="False" IsTextEditable="False" EditValue="{Binding FormatString, RelativeSource={RelativeSource TemplatedParent}}">
                                        <dxe:ButtonEdit.Buttons>
                                            <dxe:ButtonInfo GlyphKind="Regular">
                                                <dxmvvm:Interaction.Behaviors>
                                                    <dxe:DialogServiceEditorBehavior Commands="{dxe:UICommandContainerGenerator Buttons=OKCancel}" >
                                                        <dxe:DialogServiceEditorBehavior.DialogServiceTemplate>
                                                            <DataTemplate>
                                                                <ContentControl>
                                                                    <dx:DialogService>
                                                                        <dx:DialogService.DialogStyle>
                                                                            <Style TargetType="dx:DXDialogWindow">
                                                                                <Setter Property="SizeToContent" Value="WidthAndHeight" />
                                                                                <Setter Property="ResizeMode" Value="CanMinimize" />
                                                                                <Setter Property="Title" Value="Format String Editor" />
                                                                            </Style>
                                                                        </dx:DialogService.DialogStyle>
                                                                        <dx:DialogService.ViewTemplate>
                                                                            <DataTemplate>
                                                                                <designereditors:FormatStringUITypeEditor EditValue="{Binding Value}" />
                                                                            </DataTemplate>
                                                                        </dx:DialogService.ViewTemplate>
                                                                    </dx:DialogService>
                                                                </ContentControl>
                                                            </DataTemplate>
                                                        </dxe:DialogServiceEditorBehavior.DialogServiceTemplate>
                                                    </dxe:DialogServiceEditorBehavior>
                                                </dxmvvm:Interaction.Behaviors>
                                            </dxe:ButtonInfo>
                                        </dxe:ButtonEdit.Buttons>
                                    </dxe:ButtonEdit>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem>
                                    <dxe:CheckEdit EditValue="{Binding IgnoreNullValues, RelativeSource={RelativeSource TemplatedParent}}" Content="Ignore null values" />
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem>
                                    <dxlc:LayoutGroup Orientation="Vertical" Style="{StaticResource LayoutGroupWithStandardGroupBox}" Header="Summary Running" Padding="3">
                                        <dxe:ListBoxEdit ShowBorder="False" BorderThickness="0" ItemsSource="{dxe:EnumItemsSource EnumType={x:Type reportsui:SummaryRunning}}" EditValue="{Binding SummaryRunning, RelativeSource={RelativeSource TemplatedParent}}"
                                                         StyleSettings="{dataaccesseditors:RadioListBoxEditStyleSettingsEx}">
                                            <dxe:ListBoxEdit.ItemContainerStyle>
                                                <Style TargetType="FrameworkElement">
                                                    <Setter Property="Margin" Value="0,3,24,3" />
                                                </Style>
                                            </dxe:ListBoxEdit.ItemContainerStyle>
                                            <dxe:ListBoxEdit.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <UniformGrid Rows="2" Columns="2" />
                                                </ItemsPanelTemplate>
                                            </dxe:ListBoxEdit.ItemsPanel>
                                        </dxe:ListBoxEdit>
                                    </dxlc:LayoutGroup>
                                </dxlc:LayoutItem>
                            </dxlc:LayoutGroup>
                            <dxlc:LayoutGroup Grid.Column="1" ItemLabelsAlignment="Local" Orientation="Vertical" Width="200" Margin="9,0,0,0">
                                <dxlc:LayoutItem HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                    <Border BorderThickness="1" BorderBrush="DarkGray" Background="White" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                        <StackPanel Orientation="Vertical">
                                            <ItemsControl Margin="18" ItemsSource="{Binding PreviewData, RelativeSource={RelativeSource TemplatedParent}}">
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <TextBlock>
                                                            <TextBlock.Text>
                                                                <MultiBinding Converter="{StaticResource summaryPreviewToTextConverter}">
                                                                    <Binding />
                                                                    <Binding Source="{x:Null}" />
                                                                </MultiBinding>
                                                            </TextBlock.Text>
                                                        </TextBlock>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                            <Border BorderThickness="0,1,0,0" Margin="9,0,27,6" BorderBrush="Black"/>
                                        <TextBlock Margin="18,0">
                                            <TextBlock.Text>
                                                <MultiBinding Converter="{StaticResource summaryPreviewToTextConverter}">
                                                    <Binding Path="PreviewResult" RelativeSource="{RelativeSource TemplatedParent}" />
                                                    <Binding Path="FormatString" RelativeSource="{RelativeSource TemplatedParent}" />
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                        </StackPanel>
                                    </Border>
                                </dxlc:LayoutItem>
                            </dxlc:LayoutGroup>
                        <dx:DialogFooter>
                            <Grid>
                                <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                                    <dx:DialogButton DialogResult="OK" Command="{Binding SaveCommand, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <dx:DialogButton DialogResult="Cancel" />
                                </StackPanel>
                            </Grid>
                        </dx:DialogFooter>
                    </dxlc:LayoutControl>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>