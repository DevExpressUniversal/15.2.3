<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:fieldlist="clr-namespace:DevExpress.Xpf.Reports.UserDesigner.FieldList"
            xmlns:fieldlistnative="clr-namespace:DevExpress.Xpf.Reports.UserDesigner.FieldList.Native"
            xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
            xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
            xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
            xmlns:dxdiag="clr-namespace:DevExpress.Xpf.Diagram;assembly=DevExpress.Xpf.Diagram.v15.2"
            xmlns:designerthemes="clr-namespace:DevExpress.Xpf.Reports.UserDesigner.Themes"
            xmlns:designer="clr-namespace:DevExpress.Xpf.Reports.UserDesigner"
            xmlns:designernative="clr-namespace:DevExpress.Xpf.Reports.UserDesigner.Native">

    <DataTemplate x:Key="{designerthemes:ReportDesignerThemeKey ResourceKey=FieldListNodeTemplate}">
        <StackPanel Orientation="Horizontal">
            <StackPanel.Resources>
                <designernative:TypeSpecificsToImageSourceConverter x:Key="typeSpecificsToImageSourceConverter" />
            </StackPanel.Resources>
            <Image Margin="0,0,5,0" Source="{Binding Data.TypeSpecifics, Converter={StaticResource typeSpecificsToImageSourceConverter}}" Width="16" Height="16" />
            <TextBlock Text="{Binding Data.DisplayName}" />
        </StackPanel>
    </DataTemplate>
    <Style TargetType="fieldlist:ReportDesignerFieldListControl">
        <Setter Property="Nodes" Value="{Binding Path=(designer:ReportDesigner.Document).ReportModel.FieldListNodes, RelativeSource={RelativeSource Self}}" />

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="fieldlist:ReportDesignerFieldListControl">
                    <dxg:TreeListControl ItemsSource="{Binding Nodes, RelativeSource={RelativeSource TemplatedParent}}" ShowBorder="False">
                        <dxg:TreeListControl.View>
                            <dxg:TreeListView AllowEditing="False" TreeDerivationMode="ChildNodesSelector" ChildNodesPath="Children" AutoWidth="True"
                                        ShowHorizontalLines="False" ShowVerticalLines="False" ShowColumnHeaders="False" ShowIndicator="False"
                                        VerticalScrollbarVisibility="Auto" ExpandCollapseNodesOnNavigation="True">
                            </dxg:TreeListView>
                        </dxg:TreeListControl.View>
                        <dxg:TreeListControl.Columns>
                            <dxg:TreeListColumn FieldName="DisplayName" CellTemplate="{DynamicResource {designerthemes:ReportDesignerThemeKey ResourceKey=FieldListNodeTemplate}}">
                                <dxg:TreeListColumn.CellStyle>
                                    <Style>
                                        <Setter Property="dxmvvm:Interaction.BehaviorsTemplate">
                                            <Setter.Value>
                                                <DataTemplate>
                                                    <ItemsControl>
                                                        <dxdiag:StartDragBehavior
                                                            Command="{Binding Data.Owner.Commands.StartDragTool}" 
                                                            CommandAlternate="{Binding Data.Owner.Commands.StartDragToolAlternate}" 
                                                            MinDragDistance="{Binding Data.Owner.MinDragDistance}"
                                                            CommandParameter="{Binding RowData.Row, Converter={dxmvvm:ReflectionConverter ConvertMethodOwner=fieldlistnative:FieldListNodeXRTool}}" />
                                                        <fieldlistnative:ExpandRootNodeBehavior TreeListNode="{Binding RowData}" />
                                                    </ItemsControl>
                                                </DataTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </dxg:TreeListColumn.CellStyle>
                            </dxg:TreeListColumn>
                        </dxg:TreeListControl.Columns>
                    </dxg:TreeListControl>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>