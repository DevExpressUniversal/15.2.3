<UserControl x:Class="DevExpress.Xpf.Core.Design.SmartTags.DesignTimeImagePickerMainView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
        xmlns:dxi="http://schemas.devexpress.com/winfx/2008/xaml/core/internal"
        xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
        xmlns:design="clr-namespace:DevExpress.Xpf.Core.Design"
        xmlns:local="clr-namespace:DevExpress.Xpf.Core.Design.SmartTags"
        mc:Ignorable="d" 
        d:DesignHeight="300" d:DesignWidth="300"
        MaxWidth="580" MaxHeight="450">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <local:DesignTimeListBoxResources/>
                <local:DesignTimeTreeViewResources/>
            </ResourceDictionary.MergedDictionaries>
            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
            <DataTemplate x:Key="FilterItemTemplate">
                <Border HorizontalAlignment="Stretch">
                    <StackPanel Orientation="Horizontal">
                        <CheckBox IsChecked="{Binding Path=IsSelected, Mode=TwoWay}" />
                        <TextBlock Text="{Binding Path=Name}" />
                    </StackPanel>
                </Border>
            </DataTemplate>
            <Style x:Key="ListBoxItemStyle" BasedOn="{StaticResource DesignTimeListBoxItemStyle}" TargetType="local:DesignTimeListBoxItem">
                <Setter Property="Padding" Value="4,0,0,0"/>
            </Style>
            <Style x:Key="TreeViewGroupStyleBase" BasedOn="{StaticResource DesignTimeTreeViewItemStyle}" TargetType="local:DesignTimeTreeViewItem">
                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                <Setter Property="VerticalContentAlignment" Value="Stretch" />
                <Setter Property="Padding" Value="0" />
                <Setter Property="IsExpanded" Value="True" />
                <Setter Property="CanBeSelected" Value="False" />
                <Setter Property="ShowExpander" Value="False"/>
                <Setter Property="ExpanderMinWidth" Value="0"/>
            </Style>
            <Style x:Key="TreeViewItemStyleBase" BasedOn="{StaticResource DesignTimeTreeViewItemStyle}" TargetType="local:DesignTimeTreeViewItem">
                <Setter Property="Padding" Value="0" />
                <Setter Property="IsExpanded" Value="True" />
                <Setter Property="ShowExpander" Value="False"/>
                <Setter Property="ExpanderMinWidth" Value="0"/>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>
    
    <local:DesignTimeAdaptablePanel>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <dxe:TextEdit Text="{Binding Path=FilterText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="155" HorizontalAlignment="Right" Padding="0,0,14,0" EditValuePostMode="Delayed" EditValuePostDelay="200" />
            <Image Stretch="None" Margin="2,0" Source="/DevExpress.Xpf.Core.v15.2.Design;component/Images/searchicon.png" HorizontalAlignment="Right" />
            <Grid Grid.Row="1" Margin="0,12,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid Width="135" Margin="0,-21,9,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <TextBlock Text="Category" Margin="4,0,0,3" FontWeight="SemiBold"/>
                    <local:DesignTimeListBox Grid.Row="1" ItemsSource="{Binding Path=Categories.ItemsWithSelectAll}" SelectionMode="Extended" 
                                         ScrollViewer.CanContentScroll="False" BorderBrush="#FFD8D8D8" BorderThickness="1"
                                         ItemTemplate="{StaticResource FilterItemTemplate}" Margin="0,0,0,10"
                                         ItemContainerStyle="{StaticResource ListBoxItemStyle}"
                                         SelectionChanged="DesignTimeListBox_SelectionChanged"/>
                    <TextBlock Grid.Row="2" Text="Size" Margin="4,0,0,3"  FontWeight="SemiBold"/>
                    <local:DesignTimeListBox Grid.Row="3" ItemsSource="{Binding Path=Sizes}" SelectionMode="Extended" 
                                         ScrollViewer.CanContentScroll="False" BorderBrush="#FFD8D8D8" BorderThickness="1"
                                         ItemTemplate="{StaticResource FilterItemTemplate}" Margin="0,0,0,10" 
                                         ItemContainerStyle="{StaticResource ListBoxItemStyle}"/>
                    <TextBlock Grid.Row="4" Text="Collection" Margin="4,0,0,3"  FontWeight="SemiBold"/>
                    <local:DesignTimeListBox Grid.Row="5" ItemsSource="{Binding Path=Collections}" SelectionMode="Extended" 
                                         ScrollViewer.CanContentScroll="False" BorderBrush="#FFD8D8D8" BorderThickness="1" 
                                         ItemTemplate="{StaticResource FilterItemTemplate}" 
                                         ItemContainerStyle="{StaticResource ListBoxItemStyle}"/>
                </Grid>
                <local:DesignTimeTreeView ItemsSource="{Binding Path=ImagesCollection.Groups}" Grid.Column="1" ItemContainerStyle="{x:Null}">
                    <local:DesignTimeTreeView.ItemTemplateSelector>
                        <dxi:TypeTemplateSelector>
                            <dxi:TemplatesDictionary>
                                <HierarchicalDataTemplate x:Key="CollectionViewGroupInternal" ItemsSource="{Binding Path=Items}">
                                    <Border Background="#FFEEEEEE" VerticalAlignment="Stretch" Padding="5">
                                        <TextBlock Text="{Binding Path=Name.Category.Name}" Foreground="Black" Margin="4,0,0,0" FontWeight="SemiBold"/>
                                    </Border>
                                </HierarchicalDataTemplate>
                                <HierarchicalDataTemplate x:Key="DesignTimeImagePickerImageViewModel">
                                    <Border Height="39" Width="39">
                                        <Image Stretch="UniformToFill" StretchDirection="DownOnly"
                                       Width="32" Height="32"
                                       local:ImageSourceUriHelper.UriSource="{Binding Path=Image.Uri}" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                    </Border>
                                </HierarchicalDataTemplate>
                            </dxi:TemplatesDictionary>
                        </dxi:TypeTemplateSelector>
                    </local:DesignTimeTreeView.ItemTemplateSelector>
                    <local:DesignTimeTreeView.ItemContainerStyleSelector>
                        <dxi:TypeStyleSelector>
                            <dxi:StylesDictionary>
                                <Style x:Key="CollectionViewGroupInternal" TargetType="local:DesignTimeTreeViewItem" BasedOn="{StaticResource TreeViewGroupStyleBase}">
                                    <Setter Property="Visibility" Value="{Binding Path=Name.IsVisible, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                    <Setter Property="ItemsPanel">
                                        <Setter.Value>
                                            <ItemsPanelTemplate>
                                                <WrapPanel MaxWidth="400" />
                                            </ItemsPanelTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                                <Style x:Key="DesignTimeImagePickerImageViewModel" TargetType="local:DesignTimeTreeViewItem" BasedOn="{StaticResource TreeViewItemStyleBase}">
                                    <Setter Property="Visibility" Value="{Binding Path=IsVisible, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                    <Setter Property="ToolTip" Value="{Binding Path=Image.Name}" />
                                    <Setter Property="MouseDoubleClickCommandParameter" Value="{Binding}" />
                                    <Setter Property="MouseDoubleClickCommand" Value="{Binding Path=Selector.SelectAndCloseCommand}" />
                                    <Setter Property="IsSelected" Value="{Binding Path=IsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                </Style>
                            </dxi:StylesDictionary>
                        </dxi:TypeStyleSelector>
                    </local:DesignTimeTreeView.ItemContainerStyleSelector>
                </local:DesignTimeTreeView>
            </Grid>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Grid.Row="2" Margin="0,12,0,0">
                <Button Content="OK" MinWidth="80" Command="{Binding Path=OKCommand}" />
                <Button Content="Cancel" MinWidth="80" Margin="12,0,0,0" Command="{Binding Path=CancelCommand}" />
            </StackPanel>
        </Grid>
    </local:DesignTimeAdaptablePanel>
</UserControl>
