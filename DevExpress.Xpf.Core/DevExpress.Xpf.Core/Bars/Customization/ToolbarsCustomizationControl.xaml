<UserControl x:Class="DevExpress.Xpf.Bars.Customization.ToolbarsCustomizationControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:dxtEx="clr-namespace:DevExpress.Xpf.Utils.Themes"
    xmlns:dx="clr-namespace:DevExpress.Xpf.Core"
    xmlns:dxe="clr-namespace:DevExpress.Xpf.Editors"
    xmlns:dxb="clr-namespace:DevExpress.Xpf.Bars"
    xmlns:local="clr-namespace:DevExpress.Xpf.Bars.Customization"
    >
    <UserControl.Resources>
        <ResourceDictionary>
            <dx:BarsStringIdConverter x:Key="BarsStringIdConverter" />
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid SnapsToDevicePixels="True">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <TextBlock x:Name="toolbarsLabel" Margin="0,0,0,3" Text="{Binding ConverterParameter=ToolbarsCustomizationControl_ToolbarsListCaption, Converter={StaticResource BarsStringIdConverter}, RelativeSource={RelativeSource Self}}" />
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <ListBox ItemsSource="{Binding Bars}" Margin="0,0,6,0" x:Name="toolbarList">                
                <ListBox.ItemContainerStyle>
                    <Style TargetType="{x:Type ListBoxItem}">
                        <Setter Property="ContentTemplate">
                            <Setter.Value>
                                <DataTemplate>
                                    <DockPanel LastChildFill="True">
                                        <dxe:CheckEdit IsChecked="{Binding Visible, Mode=OneTime}" EditValueChanged="VisibilityCheckEditValueChanged" IsEnabled="{Binding IsAllowHide}" DockPanel.Dock="Left" Margin="3" Focusable="False"/>
                                        <TextBlock Text="{Binding Caption}" DockPanel.Dock="Right" VerticalAlignment="Center"/>
                                    </DockPanel>                                    
                                </DataTemplate>
                            </Setter.Value>
                        </Setter>
                        <EventSetter Event="PreviewMouseLeftButtonDown" Handler="OnListBoxItemGotFocus"/>                                                    
                    </Style>
                </ListBox.ItemContainerStyle>
            </ListBox>
            <StackPanel Grid.Column="1">
                <Button x:Name="newToolbarButton" Command="{Binding CreateBarCommand}"  Padding="24,2,24,2" Margin="0,0,0,4" HorizontalAlignment="Stretch" Content="{Binding Path=Margin, ConverterParameter=New, Converter={StaticResource BarsStringIdConverter}, RelativeSource={RelativeSource Self}}"/>
                <Button x:Name="renameToolbarButton" Command="{Binding RenameBarCommand}" CommandParameter="{Binding ElementName=toolbarList, Path=SelectedItem}" Padding="24,2,24,2" Margin="0,0,0,4" HorizontalAlignment="Stretch" Content="{Binding Path=Margin, ConverterParameter=Rename, Converter={StaticResource BarsStringIdConverter}, RelativeSource={RelativeSource Self}}"/>
                <Button x:Name="deleteToolbarButton" Command="{Binding DeleteBarCommand}" CommandParameter="{Binding ElementName=toolbarList, Path=SelectedItem}" Padding="24,2,24,2" Margin="0,0,0,4" HorizontalAlignment="Stretch" Content="{Binding Path=Margin, ConverterParameter=Delete, Converter={StaticResource BarsStringIdConverter}, RelativeSource={RelativeSource Self}}"/>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>
