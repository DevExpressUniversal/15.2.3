<UserControl x:Class="DevExpress.Design.Filtering.UI.FilteringModelConfigurator"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ui="clr-namespace:DevExpress.Design.UI"
    xmlns:eufUI="clr-namespace:DevExpress.Design.Filtering.UI"
    >
    <UserControl.Resources>
        <ui:BooleanToVisibilityConverter x:Key="ButtonsVisibilityConverter"/>
        <DataTemplate DataType="{x:Type eufUI:ModelTypeSettingsPageViewModel}">
            <eufUI:ModelTypeSettingsPage />
        </DataTemplate>
        <DataTemplate DataType="{x:Type eufUI:MetricAttributesSettingsPageViewModel}">
            <eufUI:MetricAttributesSettingsPage />
        </DataTemplate>
        <Style x:Key="TabControlWithoutHeader" TargetType="{x:Type TabControl}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type TabControl}">
                        <Grid KeyboardNavigation.TabNavigation="Local">
                            <ContentPresenter Margin="{TemplateBinding Padding}" Content="{TemplateBinding SelectedItem}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ui:TabControlBehavior.CtrlTabNavigation" Value="Ignore"/>
        </Style>
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="48"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <TabControl 
            Style="{StaticResource TabControlWithoutHeader}"
            ItemsSource="{Binding Pages}" 
            SelectedIndex="{Binding SelectedIndex}"
            IsSynchronizedWithCurrentItem="True"
            />
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
            <Button x:Name="editButton" Content="{eufUI:FilteringModelConfiguratorLocalizerStringId ID=EditCaption}" Style="{DynamicResource ResourceKey={ui:ControlsThemeKey Key=NavigationButton}}" 
                    Visibility="{Binding IsPrevPageAvailable, Converter={StaticResource ButtonsVisibilityConverter}}"
                    Command="{Binding PrevPageCommand}" CommandParameter="{Binding SelectedPage}"/>
            <Button x:Name="backButton" Content="{eufUI:FilteringModelConfiguratorLocalizerStringId ID=BackCaption}" Style="{DynamicResource ResourceKey={ui:ControlsThemeKey Key=NavigationButton}}" 
                    Visibility="{Binding IsNextPageAvailable, Converter={StaticResource ButtonsVisibilityConverter}}"
                    Command="{Binding NextPageCommand}" CommandParameter="{Binding SelectedPage}"/>
            <Button x:Name="finishButton" Content="{eufUI:FilteringModelConfiguratorLocalizerStringId ID=FinishCaption}" Style="{DynamicResource ResourceKey={ui:ControlsThemeKey Key=NavigationButton}}" 
                    Visibility="{Binding IsFinishAvailable, Converter={StaticResource ButtonsVisibilityConverter}}"
                    Command="{Binding FinishCommand}" CommandParameter="{Binding SelectedPage}"/>
        </StackPanel>
    </Grid>
</UserControl>

