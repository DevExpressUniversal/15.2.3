<UserControl x:Class="DevExpress.Xpf.Docking.Design.CustomizationPanel"         
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:dxcd="clr-namespace:DevExpress.Xpf.Core.Design.CoreUtils;assembly=DevExpress.Xpf.Core.v15.2.Design"
    xmlns:dxdo="http://schemas.devexpress.com/winfx/2008/xaml/docking"
    xmlns:ve="http://schemas.devexpress.com/winfx/2008/xaml/docking/visualelements"
    xmlns:dxdd="clr-namespace:DevExpress.Xpf.Docking.Design"
    UseLayoutRounding="True"
    Height="Auto" Width="Auto">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/DevExpress.Xpf.Docking.v15.2.Design;component/Resources/CustomizationPanelResources.xaml" />
                <ResourceDictionary Source="/DevExpress.Xpf.Docking.v15.2.Design;component/Resources/Scrollbar.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <dxdd:CreateNewCaptionFormatter x:Key="captionNewFormatter" />
        </ResourceDictionary>
    </UserControl.Resources>
   
    <Canvas Background="Transparent">
        <Decorator x:Name="controlPanel" Canvas.Top="10" Canvas.Right="10">
            <Grid x:Name="LayoutRoot">
                <Grid Margin="0" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <Grid.Effect>
                        <DropShadowEffect ShadowDepth="1" Direction="-90" Opacity="0.25" BlurRadius="8" />
                    </Grid.Effect>
                    <Border CornerRadius="3" Background="#FF8E9299" Padding="1" MinWidth="270">
                        <Border.MinHeight>
                            <Binding Path="IsAdornerPanelExpanded">
                                <Binding.Converter>
                                    <dxcd:BoolToDoubleConverter TrueValue="120" FalseValue="0" />
                                </Binding.Converter>
                            </Binding>
                        </Border.MinHeight>
                        <Border CornerRadius="2" Background="#FFE4E9EF">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <Grid x:Name="PART_DragArea" Margin="0,-1,0,1" Cursor="SizeAll" Background="#00FF0000">
                                    <Thumb x:Name="dragThumb" DragDelta="dragThumb_DragDelta" MinHeight="12">
                                        <Thumb.Template>
                                            <ControlTemplate>
                                                <Border Background="Transparent" />
                                            </ControlTemplate>
                                        </Thumb.Template>
                                    </Thumb>
                                    <Path Stretch="Fill" Fill="#FFBBBDC0" Data="F1 M 1172,729L 1172,731L 1170,731L 1170,729L 1172,729 Z M 1168,728.999L 1168,729L 1168,730.999L 1168,731L 1166,731L 1166,730.999L 1166,729L 1166,728.999L 1168,728.999 Z M 1164,728.999L 1164,729L 1164,729L 1164,731L 1162,731L 1162,730.999L 1162,730.999L 1162,730.999L 1162,728.999L 1164,728.999L 1164,728.999 Z M 1158,730.999L 1158,728.999L 1158,728.999L 1158,728.999L 1160,728.999L 1160,729L 1160,730.999L 1160,731L 1158,731L 1158,730.999L 1158,730.999 Z M 1156,728.999L 1156,730.999L 1154,730.999L 1154,730.999L 1154,728.999L 1156,728.999L 1156,728.999 Z M 1152,728.999L 1152,730.999L 1150,730.999L 1150,728.999L 1152,728.999 Z " Margin="0,4,0,0" UseLayoutRounding="False" Width="22" Height="2" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                </Grid>
                                <ToggleButton IsChecked="{Binding IsAdornerPanelExpanded, Mode=TwoWay}" x:Name="collapse_button" Style="{DynamicResource collapse-button}" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="2" />
                                <StackPanel Visibility="{Binding IsAdornerPanelExpanded, Converter={StaticResource visibilityConverter}}" Grid.Row="1">
                                    <Grid x:Name="content" Margin="22,0">
                                        <StackPanel Margin="0,2,0,0" Orientation="Vertical" Grid.Column="1">
                                            <Button HorizontalContentAlignment="Stretch" x:Name="createItemButton" Style="{DynamicResource createButton}" Click="createItemButton_Click">
                                                <Button.ToolTip>
                                                    <Binding>
                                                        <Binding.Converter>
                                                            <dxdd:LocalizerConverter DockingStringId="ToolTipCreateItem" />
                                                        </Binding.Converter>
                                                    </Binding>
                                                </Button.ToolTip>
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="Auto" />
                                                    </Grid.ColumnDefinitions>
                                                    <Popup x:Name="dockTypePopup" PlacementTarget="{Binding ElementName=createItemButton, Mode=OneWay}" StaysOpen="False">
                                                        <dxcd:MouseEventsEndPoint>
                                                            <Border Background="#FF8E9299" x:Name="DockTypeEditorBorder" />
                                                        </dxcd:MouseEventsEndPoint>
                                                    </Popup>
                                                    <TextBlock Margin="5,0,5,0" Grid.Column="0" TextWrapping="Wrap" HorizontalAlignment="Left" VerticalAlignment="Center" Text="{Binding Path=SelectedType, Converter={StaticResource captionNewFormatter}}" />
                                                    <dxcd:ContextMenuButton Grid.Column="1" x:Name="changeEditSettingsButton" VerticalAlignment="Center" Style="{StaticResource dropdownbutton}">
                                                        <dxcd:ContextMenuButton.ToolTip>
                                                            <Binding>
                                                                <Binding.Converter>
                                                                    <dxdd:LocalizerConverter DockingStringId="ToolTipChangeItemType" />
                                                                </Binding.Converter>
                                                            </Binding>
                                                        </dxcd:ContextMenuButton.ToolTip>
                                                        <dxcd:ContextMenuButton.ContextMenu>
                                                            <ContextMenu Name="changeAviableTypeMenu" Placement="Bottom" ItemsSource="{Binding Path=AvailableLayoutItems}" DisplayMemberPath="Type" ItemContainerStyle="{StaticResource menuItemStyle}" />
                                                        </dxcd:ContextMenuButton.ContextMenu>
                                                    </dxcd:ContextMenuButton>
                                                </Grid>
                                            </Button>
                                            <dxcd:ToggleStateButton Margin="0,4,0,0" VerticalAlignment="Top" Style="{DynamicResource toggle-button}" IsChecked="{Binding IsLayoutItemSelected}">
                                                <Grid Margin="5,3,5,3">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="Auto" />
                                                    </Grid.ColumnDefinitions>
                                                    <TextBox x:Name="PART_CaptionText" Grid.Column="0" VerticalAlignment="Center" Visibility="{Binding IsLayoutItemSelected, Converter={StaticResource visibilityConverter}}" BorderThickness="0" Background="Transparent">
                                                        <TextBox.ToolTip>
                                                            <Binding>
                                                                <Binding.Converter>
                                                                    <dxdd:LocalizerConverter DockingStringId="ToolTipEditCaption" />
                                                                </Binding.Converter>
                                                            </Binding>
                                                        </TextBox.ToolTip>
                                                    </TextBox>
                                                    <TextBlock Margin="0" TextWrapping="Wrap" VerticalAlignment="Center" Visibility="{Binding IsLayoutItemSelected, Converter={StaticResource BoolToVisibilityInverseConverter}}" Foreground="{StaticResource PropertyNotSetForeColor}">
                                                        <TextBlock.Text>
                                                            <Binding>
                                                                <Binding.Converter>
                                                                    <dxdd:LocalizerConverter DockingStringId="NoItemSelected" />
                                                                </Binding.Converter>
                                                            </Binding>
                                                        </TextBlock.Text>
                                                    </TextBlock>
                                                    <Button Command="{Binding RemoveItemCommand}" Style="{DynamicResource dropdownbutton-delete}" HorizontalAlignment="Right" VerticalAlignment="Center" Visibility="{Binding IsLayoutItemSelected, Converter={StaticResource visibilityConverter}}">
                                                        <Button.ToolTip>
                                                            <Binding>
                                                                <Binding.Converter>
                                                                    <dxdd:LocalizerConverter DockingStringId="ToolTipDeleteItem" />
                                                                </Binding.Converter>
                                                            </Binding>
                                                        </Button.ToolTip>
                                                    </Button>
                                                </Grid>
                                            </dxcd:ToggleStateButton>
                                            <Grid Margin="-3,12,-3,0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Button x:Name="saveLayoutButton" Style="{DynamicResource button}" Margin="3,0,3,0" MinWidth="70" Command="{Binding SaveLayoutCommand}">
                                                    <Button.Content>
                                                        <Binding>
                                                            <Binding.Converter>
                                                                <dxdd:LocalizerConverter DockingStringId="ButtonSave" />
                                                            </Binding.Converter>
                                                        </Binding>
                                                    </Button.Content>
                                                </Button>
                                                <Button x:Name="loadLayoutButton" Style="{DynamicResource button}" Margin="3,0,3,0" Grid.Column="1" MinWidth="70" Command="{Binding LoadLayoutCommand}">
                                                    <Button.Content>
                                                        <Binding>
                                                            <Binding.Converter>
                                                                <dxdd:LocalizerConverter DockingStringId="ButtonRestore" />
                                                            </Binding.Converter>
                                                        </Binding>
                                                    </Button.Content>
                                                </Button>
                                            </Grid>
                                        </StackPanel>
                                    </Grid>
                                    <dxcd:ToggleStateButton x:Name="PART_LayoutTreePanel" Style="{DynamicResource toggle-button}" VerticalAlignment="Top" Margin="22,12,22,0" Grid.Row="2">
                                        <dxdd:DesignTreeView x:Name="PART_LayoutTree" MinHeight="150" MaxHeight="150" Margin="5,3,5,3">
                                            <dxdd:DesignTreeView.Style>
                                                <Style TargetType="dxdd:DesignTreeView">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate>
                                                                <Grid Width="Auto" Height="Auto">
                                                                    <TreeView x:Name="PART_TreeView">
                                                                        <TreeView.ItemContainerStyle>
                                                                            <Style TargetType="{x:Type TreeViewItem}">
                                                                                <Setter Property="IsExpanded" Value="True" />
                                                                                <Setter Property="Foreground" Value="Black" />
                                                                            </Style>
                                                                        </TreeView.ItemContainerStyle>
                                                                        <TreeView.ItemTemplateSelector>
                                                                            <dxdd:LayoutTreeItemTemplateSelector>
                                                                                <dxdd:LayoutTreeItemTemplateSelector.LayoutGroupTemplate>
                                                                                    <HierarchicalDataTemplate DataType="{x:Type dxdo:LayoutGroup}" ItemsSource="{Binding Path=Items}">
                                                                                        <ve:TreeItem />
                                                                                    </HierarchicalDataTemplate>
                                                                                </dxdd:LayoutTreeItemTemplateSelector.LayoutGroupTemplate>
                                                                                <dxdd:LayoutTreeItemTemplateSelector.LayoutItemTemplate>
                                                                                    <HierarchicalDataTemplate DataType="{x:Type dxdo:BaseLayoutItem}">
                                                                                        <ve:TreeItem />
                                                                                    </HierarchicalDataTemplate>
                                                                                </dxdd:LayoutTreeItemTemplateSelector.LayoutItemTemplate>
                                                                            </dxdd:LayoutTreeItemTemplateSelector>
                                                                        </TreeView.ItemTemplateSelector>
                                                                    </TreeView>
                                                                </Grid>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </dxdd:DesignTreeView.Style>
                                        </dxdd:DesignTreeView>
                                    </dxcd:ToggleStateButton>
                                    <ToggleButton x:Name="more_button" IsChecked="{Binding IsLayoutTreeExpanded, Mode=TwoWay}" Content="ToggleButton" Grid.Column="1" HorizontalAlignment="Center" Margin="0,2" Style="{DynamicResource MoreButton}" VerticalAlignment="Center" Grid.Row="3" />
                                </StackPanel>
                            </Grid>
                        </Border>
                    </Border>
                </Grid>
            </Grid>
        </Decorator>
    </Canvas>
</UserControl>